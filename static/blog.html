<!DOCTYPE html>

<!-- 
    blog.html 
    Copyright (c) 2026 Arthur Taft. All Rights Reserved.
-->

<html>

<head>
    <title>blog | arthurtaft.net</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="/favicon.ico" />
    <style>
        #container .main-text {
            align-self: center;
        }
    </style>
</head>

<body>
    <div id="main-cont">
        <div id="top-nav">
            <ul class="nav-list">
                <li class="nav-item"><a class="nav-link" href="/">home</a></li>
                <li class="nav-item"><a class="nav-link" href="/blog">blog</a></li>
                <li class="nav-item"><a class="nav-link" href="/resume">resume</a></li>
                <li class="nav-item"><a class="nav-link" href="/contact">contact</a></li>
                <li class="nav-item"><a class="nav-link" href="/about">about me</a></li>
            </ul>
        </div>
        <div id="title-div">
            <h1 class="logo">>_</h1>
            <h1 class="page-title">arthurtaft.net</h1>
        </div>
        <div id="container">
            <h2 class="main-header">Blog</h2>
            <div id="blog-list">

            </div>
        </div>
        <div id="footer">
            <p class="footer-text">source: <a class="footer-link" href="https://github.com/arthur-taft/website"
                    target="_blank">github.com/arthur-taft/website</a></p>
            <p class="copy-text">&copy; arthur taft - 2026</p>
        </div>
    </div>
    <script>
        // grab conainer div
        const blogList = document.getElementById('blog-list');

        // get json file containing all blog posts
        fetch('/blog/posts/posts.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error("HTTP error " + response.status);
                }
                return response.json();
            })
            .then(data => {
                // sort posts by newest first
                data.sort((a, b) => {
                    return new Date(b.date) - new Date(a.date);
                });
                renderPosts(data);
            })
            .catch(error => {
                console.error("something went wrong:", error);
            });

        function renderPosts(posts) {
            // clear div to make sure no funky business happens
            blogList.innerHTML = '';

            posts.forEach(post => {
                const postDiv = document.createElement('div');
                const postLink = document.createElement('a');
                const postTitle = document.createElement('h3');
                const postDate = document.createElement('p');
                const postSummary = document.createElement('p');

                postDiv.className = "post-preview";

                postLink.href = "/blog/posts/article?post=" + post.slug;

                postTitle.textContent = post.title;
                postDate.textContent = post.date;
                postSummary.textContent = post.summary;

                postLink.append(postTitle);

                postDiv.append(postLink, postDate, postSummary);

                blogList.appendChild(postDiv);
            });
        }
    </script>
</body>

</html>
