<!DOCTYPE html>

<!-- 
    blog.html 
    Copyright (c) 2026 Arthur Taft. All Rights Reserved.
-->

<html>

<head>
    <title>blog | arthurtaft.net</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="/favicon.ico" />
    <style>
        #container .main-text {
            align-self: center;
        }
    </style>
</head>

<body>
    <div id="main-cont">
        <div id="top-nav">
            <ul class="nav-list">
                <li class="nav-item"><a class="nav-link" href="/">home</a></li>
                <li class="nav-item"><a class="nav-link" href="/blog">blog</a></li>
                <li class="nav-item"><a class="nav-link" href="/resume">resume</a></li>
                <li class="nav-item"><a class="nav-link" href="/contact">contact</a></li>
                <li class="nav-item"><a class="nav-link" href="/about">about me</a></li>
            </ul>
        </div>
        <div id="title-div">
            <h1 class="logo">>_</h1>
            <h1 class="page-title">arthurtaft.net</h1>
        </div>
        <div id="container">
            <h2 id="article-title" class="main-header">Loading...</h2>
            <p class="main-subheading" id="article-date"></p>
            <div class="main-text" id="article-content"></div>
        </div>
        <div id="footer">
            <p class="footer-text">source: <a class="footer-link" href="https://github.com/arthur-taft/website"
                    target="_blank">github.com/arthur-taft/website</a></p>
            <p class="copy-text">&copy; arthur taft - 2026</p>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // yoink what article we want from the url
        const urlParams = new URLSearchParams(window.location.search);
        let postSlug = urlParams.get('post');

        if (!postSlug) {
            const path = window.location.pathname;

            const segments = path.split('/').filter(part => part !== "");

            postSlug = segments[segments.length - 1];
        }

        const titleEl = document.getElementById('article-title');
        const dateEl = document.getElementById('article-date');
        const contentEl = document.getElementById('article-content');

        fetch('/blog/posts/posts.json')
            .then(response => response.json())
            .then(posts => {
                const myPost = posts.find(p => p.slug === postSlug);

                if (myPost) {
                    titleEl.textContent = myPost.title;
                    dateEl.textContent = myPost.date;

                    document.title = myPost.title + " | arthurtaft.net";

                    return fetch(myPost.content);
                } else {
                    throw new Error("Post not found");
                }
            })
            .then(response => {
                if (!response.ok) throw new Error("Content file not found");
                return response.text();
            })
            .then(text => {
                contentEl.innerHTML = marked.parse(text);
            })
            .catch(error => {
                titleEl.textContent = "Error Loading Post";
                contentEl.textContent = "Couldn't find that post." + error;
            });
    </script>
</body>

</html>
